#############################################################################################################
**Отримання списку всіх доступних сертифікатів по штрих-коду товару**
#############################################################################################################

Для роботи з цим методом користувач повинен бути `авторизованим <https://wiki.edin.ua/uk/latest/Certificate/EDIN/API/Methods/Authorization.html>`__ .

+--------------------------------------------------------------+--------------------------------------------------------------+
|                       **Метод запиту**                       |                         **HTTP GET**                         |
+==============================================================+==============================================================+
| **Content-Type**                                             | application/json (тіло HTTP запиту/відповіді в json форматі) |
+--------------------------------------------------------------+--------------------------------------------------------------+
| **URL запиту**                                               | **https://edo.edin.ua/Api/V1/GetCertUA/GetCertsByBarcode**   |
+--------------------------------------------------------------+--------------------------------------------------------------+
| **Параметри, що передаються в URL (разом з адресою методу)** | -//-                                                         |
+--------------------------------------------------------------+--------------------------------------------------------------+

**JSON-параметри в тілі HTTP запиту/відповіді**
*******************************************************************

``REQUEST``

Таблиця 1 - Опис json-параметрів **запиту**

+-----------+--------------------+--------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Параметр  | Mandatory/Optional | Формат |                                                                                                           Опис                                                                                                           |
+===========+====================+========+==========================================================================================================================================================================================================================+
| varToken​ | M                  | String | Токен, отриманий при `авторизації <https://wiki.edin.ua/uk/latest/Certificate/EDIN/API/Methods/Authorization.html>`__                                                                                                    |
+-----------+--------------------+--------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| barcode​  | M                  | number | штрих-код товару, до якого прив'язаний сертифікат                                                                                                                                                                        |
+-----------+--------------------+--------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| filter​   | O                  | number | фільтр; **owner​** - повернути тільки створен сертифіката юзера-власника; **private** - повернути тільки розшарені сертифікати юзера-власника; **public** - повернути тільки загальнодоступні сертифікати юзера-власника |
+-----------+--------------------+--------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

``RESPONSE``

Таблиця 2 - Опис json-параметрів **відповіді** метода API

+--------------------+--------------------+---------------------+----------------------------------------------+
|      Параметр      | Mandatory/Optional |       Формат        |                     Опис                     |
+====================+====================+=====================+==============================================+
| ​**​certs​​**      |                    | [{...}]             | масив об'єктів; інформація про сертифікати   |
+--------------------+--------------------+---------------------+----------------------------------------------+
| ​varMessage​       |                    | String              | повідомлення сервера                         |
+--------------------+--------------------+---------------------+----------------------------------------------+
| ​intCode​          |                    | int                 | код відповіді сервера                        |
+--------------------+--------------------+---------------------+----------------------------------------------+
| ​intCertID​        |                    | int                 | ID сертификата                               |
+--------------------+--------------------+---------------------+----------------------------------------------+
| ​varNumber​        |                    | String              | номер сертифіката                            |
+--------------------+--------------------+---------------------+----------------------------------------------+
| ​varStartDate​     |                    | YYYY-MM-DD HH:MM:SS | дата старту сертифіката                      |
+--------------------+--------------------+---------------------+----------------------------------------------+
| ​varEndDate​       |                    | YYYY-MM-DD HH:MM:SS | дата закінчення сертифіката                  |
+--------------------+--------------------+---------------------+----------------------------------------------+
| ​varReviewDate​    |                    | YYYY-MM-DD HH:MM:SS | дата/час ревізії сертифіката (останні зміни) |
+--------------------+--------------------+---------------------+----------------------------------------------+
| ​intSupplierGlnID​ |                    | int                 | GLN користувача-постачальника сертифіката    |
+--------------------+--------------------+---------------------+----------------------------------------------+


--------------

**Приклади**
*****************

Приклад тіла **запиту** в json форматі:

.. code:: ruby

  {
    "​ varToken​ ": "​ 8q0hu05o59vmmrpo4t5slfedj2​ ",
    "​ barcode​ ": "​ 4820000000000​ ",
    "​ filter​ ": "​ owner​ "
  }

--------------

Приклад тіла **відповіді** в json форматі: 

.. code:: ruby

  {
    "​certs​": [
      {
        "​intCertID​ ": "​ 1493​ ",
        "​varNumber​ ": "​ 1233​ ",
        "​varStartDate​ ": "​ 2017-06-01 00:00:00​ ",
        "​varEndDate​ ": "​ 2017-06-30 00:00:00​ ",
        "​varReviewDate​ ": "​ 2017-06-02 11:37:59​ ",
        "​intSupplierGlnID​ ": "​ 133061​ "
      },
      {
        "​intCertID​ ": "​ 1495​ ",
        "​varNumber​ ": "​ 4567654​ ",
        "​varStartDate​ ": "​ 2017-06-03 00:00:00​ ",
        "​varEndDate​ ": "​ 2017-07-07 00:00:00​ ",
        "​varReviewDate​ ": "null​",
        "​intSupplierGlnID​ ": "​ 133061​ "
      }
    ],
    "​varMessage​ ": "​ Success!​ ",
    "​intCode​ ": 200
  }

.. include:: GetCert_errors.rst
