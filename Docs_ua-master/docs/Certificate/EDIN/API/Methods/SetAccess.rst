#############################################################################################################
**Надання прав доступу до сертифіката (обмежений доступ для конкретних користувачів)**
#############################################################################################################

Для роботи з цим методом користувач повинен бути `авторизованим <https://wiki.edin.ua/uk/latest/Certificate/EDIN/API/Methods/Authorization.html>`__ .

+--------------------------------------------------------------+--------------------------------------------------------------+
|                       **Метод запиту**                       |                        **HTTP POST**                         |
+==============================================================+==============================================================+
| **Content-Type**                                             | application/json (тіло HTTP запиту/відповіді в json форматі) |
+--------------------------------------------------------------+--------------------------------------------------------------+
| **URL запиту**                                               | **https://edo.edin.ua/Api/V1/Certificate/SetAccess**         |
+--------------------------------------------------------------+--------------------------------------------------------------+
| **Параметри, що передаються в URL (разом з адресою методу)** | -//-                                                         |
+--------------------------------------------------------------+--------------------------------------------------------------+

**JSON-параметри в тілі HTTP запиту/відповіді**
*******************************************************************

``REQUEST``

Таблиця 1 - Опис json-параметрів **запиту**

+---------------+--------------------+----------+----------------------------------------------------------------------------------------------------------------------------------------------+
|   Параметр    | Mandatory/Optional |  Формат  |                                                                     Опис                                                                     |
+===============+====================+==========+==============================================================================================================================================+
| varToken​     | M                  | String   | токен, отриманий при `авторизації <https://wiki.edin.ua/uk/latest/Certificate/EDIN/API/Methods/Authorization.html>`__                        |
+---------------+--------------------+----------+----------------------------------------------------------------------------------------------------------------------------------------------+
| cert_id       | M                  | int (11) | id сертифіката (intCertID)                                                                                                                   |
+---------------+--------------------+----------+----------------------------------------------------------------------------------------------------------------------------------------------+
| access_type   | M                  | int      | тип доступу сертификата; 1 - доступний усім, 2 - обмежений доступ                                                                            |
+---------------+--------------------+----------+----------------------------------------------------------------------------------------------------------------------------------------------+
| access_action | O...M              | int      | дія по доступу до сертифікату; 1 - відкрити доступ до сертифікту, 2 - закрити доступ до сертифікату. Поле обов'язкове при access_type=2      |
+---------------+--------------------+----------+----------------------------------------------------------------------------------------------------------------------------------------------+
| amigos_info   | O...M              | [{...}]  | масив об'єктів; дані контрагентів. Поле обов'язкове при access_type=2                                                                        |
+---------------+--------------------+----------+----------------------------------------------------------------------------------------------------------------------------------------------+
| gln           | M                  | String   | GLN користувача, для якого здійснюється налаштування доступу до сертифіката                                                                  |
+---------------+--------------------+----------+----------------------------------------------------------------------------------------------------------------------------------------------+
| isRetailer    | O                  | boolean  | відмітка, чи являється контрагент Торговою Мережею; false - открываем/ограничиваем доступ для GLN; true - відкрити/закрити доступ для мережі |
+---------------+--------------------+----------+----------------------------------------------------------------------------------------------------------------------------------------------+

``RESPONSE``

Таблиця 2 - Опис json-параметрів **відповіді** метода API

+--------------+--------------------+--------+-----------------------+
|   Параметр   | Mandatory/Optional | Формат |         Опис          |
+==============+====================+========+=======================+
| ​varMessage​ |                    | String | повідомлення сервера  |
+--------------+--------------------+--------+-----------------------+
| ​intCode​    |                    | int    | код відповіді сервера |
+--------------+--------------------+--------+-----------------------+

--------------

**Приклади**
*****************

Приклад тіла **запиту** в json форматі:

.. code:: ruby

	{
	  "varToken": "nohuola9h24tmj4jln3devi151",
	  "cert_id": "2173",
	  "access_type": "2",
	  "access_action": "1",
	  "amigos_info": [
	    {
	      "gln": "9864066822430",
	      "isRetailer": false
	    },
	    {
	      "gln": "9864064665428",
	      "isRetailer": false
	    },
	    {
	      "gln": "4829900023799",
	      "isRetailer": true
	    }
	  ]
	}

--------------

Приклад тіла **відповіді** в json форматі: 

.. code:: ruby

	{
	  "varMessage": "Success!",
	  "intCode": 200
	}

.. include:: SetAccess_errors.rst
