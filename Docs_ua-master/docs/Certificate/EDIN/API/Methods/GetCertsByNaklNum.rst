#############################################################################################################
**Отримання списку всіх доступних сертифікатів по Номеру ГТД**
#############################################################################################################

Для роботи з цим методом користувач повинен бути `авторизованим <https://wiki.edin.ua/uk/latest/Certificate/EDIN/API/Methods/Authorization.html>`__ .

+--------------------------------------------------------------+--------------------------------------------------------------+
|                       **Метод запиту**                       |                        **HTTP POST**                         |
+==============================================================+==============================================================+
| **Content-Type**                                             | application/json (тіло HTTP запиту/відповіді в json форматі) |
+--------------------------------------------------------------+--------------------------------------------------------------+
| **URL запиту**                                               | **https://edo.edin.ua/Api/V1/GetCertUA/GetCertsByNaklNum**   |
+--------------------------------------------------------------+--------------------------------------------------------------+
| **Параметри, що передаються в URL (разом з адресою методу)** | -//-                                                         |
+--------------------------------------------------------------+--------------------------------------------------------------+

**JSON-параметри в тілі HTTP запиту/відповіді**
*******************************************************************

``REQUEST``

Таблиця 1 - Опис json-параметрів **запиту**

+-------------+--------------------+--------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  Параметр   | Mandatory/Optional | Формат |                                                                                                           Опис                                                                                                           |
+=============+====================+========+==========================================================================================================================================================================================================================+
| varToken​   | M                  | String | Токен, отриманий при `авторизації <https://wiki.edin.ua/uk/latest/Certificate/EDIN/API/Methods/Authorization.html>`__                                                                                                    |
+-------------+--------------------+--------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ​​naklnum​​ | M                  | number | номер ГТД                                                                                                                                                                                                                |
+-------------+--------------------+--------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| filter​     | O                  | number | фільтр; **owner​** - повернути тільки створен сертифіката юзера-власника; **private** - повернути тільки розшарені сертифікати юзера-власника; **public** - повернути тільки загальнодоступні сертифікати юзера-власника |
+-------------+--------------------+--------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

``RESPONSE``

Таблиця 2 - Опис json-параметрів **відповіді** метода API

+--------------------+--------------------+---------------------+----------------------------------------------+
|      Параметр      | Mandatory/Optional |       Формат        |                     Опис                     |
+====================+====================+=====================+==============================================+
| ​**​certs​​**      |                    | [{...}]             | масив об'єктів; інформація про сертифікати   |
+--------------------+--------------------+---------------------+----------------------------------------------+
| ​varMessage​       |                    | String              | повідомлення сервера                         |
+--------------------+--------------------+---------------------+----------------------------------------------+
| ​intCode​          |                    | int                 | код відповіді сервера                        |
+--------------------+--------------------+---------------------+----------------------------------------------+
| ​intCertID​        |                    | int                 | ID сертификата                               |
+--------------------+--------------------+---------------------+----------------------------------------------+
| ​varNumber​        |                    | String              | номер сертифіката                            |
+--------------------+--------------------+---------------------+----------------------------------------------+
| ​varStartDate​     |                    | YYYY-MM-DD HH:MM:SS | дата старту сертифіката                      |
+--------------------+--------------------+---------------------+----------------------------------------------+
| ​varEndDate​       |                    | YYYY-MM-DD HH:MM:SS | дата закінчення сертифіката                  |
+--------------------+--------------------+---------------------+----------------------------------------------+
| ​varReviewDate​    |                    | YYYY-MM-DD HH:MM:SS | дата/час ревізії сертифіката (останні зміни) |
+--------------------+--------------------+---------------------+----------------------------------------------+
| ​intSupplierGlnID​ |                    | int                 | GLN користувача-постачальника сертифіката    |
+--------------------+--------------------+---------------------+----------------------------------------------+

--------------

**Приклади**
*****************

Приклад тіла **запиту** в json форматі:

.. code:: ruby

    {
      "​​varToken​​": "jrik23rv6vg1mkcu61ur5r8bf0",
      "​​naklnum​​": "63636363",
      "​​filter​​": "​​owner​​"
    }

--------------

Приклад тіла **відповіді** в json форматі: 

.. code:: ruby

    {
      "certs": [
        {
          "intCertID": "4849",
          "varNumber": "415",
          "varStartDate": "2019-10-02 00:00:00",
          "varEndDate": "2019-11-10 00:00:00",
          "varReviewDate": "2020-10-09 12:51:38",
          "intSupplierGlnID": "132991"
        }
      ],
      "varMessage": "Success!",
      "intCode": 200
    }

.. include:: GetCert_errors.rst
