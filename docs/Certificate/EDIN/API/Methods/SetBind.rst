#############################################################################################################
**Додавання/видалення "прив'язки" сертифіката до товарів**
#############################################################################################################

Для роботи з цим методом користувач повинен бути `авторизованим <https://wiki.edin.ua/uk/latest/Certificate/EDIN/API/Methods/Authorization.html>`__ .

+--------------------------------------------------------------+--------------------------------------------------------------+
|                       **Метод запиту**                       |                        **HTTP POST**                         |
+==============================================================+==============================================================+
| **Content-Type**                                             | application/json (тіло HTTP запиту/відповіді в json форматі) |
+--------------------------------------------------------------+--------------------------------------------------------------+
| **URL запиту**                                               | **https://edo.edin.ua/Api/V1/Certificate/SetBind**           |
+--------------------------------------------------------------+--------------------------------------------------------------+
| **Параметри, що передаються в URL (разом з адресою методу)** | -//-                                                         |
+--------------------------------------------------------------+--------------------------------------------------------------+

**JSON-параметри в тілі HTTP запиту/відповіді**
*******************************************************************

``REQUEST``

Таблиця 1 - Опис json-параметрів **запиту**

+------------------+--------------------+-------------------------+-----------------------------------------------------------------------------------------------------------------------+
|     Параметр     | Mandatory/Optional |         Формат          |                                                         Опис                                                          |
+==================+====================+=========================+=======================================================================================================================+
| varToken​        | M                  | String                  | токен, отриманий при `авторизації <https://wiki.edin.ua/uk/latest/Certificate/EDIN/API/Methods/Authorization.html>`__ |
+------------------+--------------------+-------------------------+-----------------------------------------------------------------------------------------------------------------------+
| cert_id          | M                  | int (11)                | id сертифіката (intCertID)                                                                                            |
+------------------+--------------------+-------------------------+-----------------------------------------------------------------------------------------------------------------------+
| bind_action      | M                  | int                     | дія по прив'язкам сертифіката до товару; 1 - Додати прив'язку до товару, 2 - Видалити прив'язку до товару             |
+------------------+--------------------+-------------------------+-----------------------------------------------------------------------------------------------------------------------+
| product_binds    | M                  | [{...}]                 | масив об'єктів; дані товарних позицій. Блок повинен містити хоча б один параметр                                      |
+------------------+--------------------+-------------------------+-----------------------------------------------------------------------------------------------------------------------+
| gtin             | O                  | [{...}]                 | штрих-код товару                                                                                                      |
+------------------+--------------------+-------------------------+-----------------------------------------------------------------------------------------------------------------------+
| article_supplier | O                  | String(30)              | артикул Поставщика                                                                                                    |
+------------------+--------------------+-------------------------+-----------------------------------------------------------------------------------------------------------------------+
| article_buyer    | O                  | String(30)              | артикул Покупця                                                                                                       |
+------------------+--------------------+-------------------------+-----------------------------------------------------------------------------------------------------------------------+
| uktved           | O                  | String(4-10)            | код УКТЗЕД                                                                                                            |
+------------------+--------------------+-------------------------+-----------------------------------------------------------------------------------------------------------------------+
| dkpp             | O                  | String "ХХ.ХХ.XX-XX.XX" | код ДКПП                                                                                                              |
+------------------+--------------------+-------------------------+-----------------------------------------------------------------------------------------------------------------------+

``RESPONSE``

Таблиця 2 - Опис json-параметрів **відповіді** метода API

+--------------+--------------------+--------+-----------------------+
|   Параметр   | Mandatory/Optional | Формат |         Опис          |
+==============+====================+========+=======================+
| ​varMessage​ |                    | String | повідомлення сервера  |
+--------------+--------------------+--------+-----------------------+
| ​intCode​    |                    | int    | код відповіді сервера |
+--------------+--------------------+--------+-----------------------+

--------------

**Приклади**
*****************

Приклад тіла **запиту** в json форматі:

.. code:: ruby

	{
	  "varToken": "jl4k81iq15utvdqtihghk38kk1",
	  "cert_id": "2199",
	  "bind_action": "1",
	  "product_binds": [
	    {
	      "gtin": "4563456345",
	      "article_supplier": "3458678967",
	      "article_buyer": "67896789678",
	      "uktved": "65756",
	      "dkpp": "99.67.46-57.46"
	    },
	    {
	      "article_supplier": "567856785",
	      "article_buyer": "465345634574",
	      "uktved": "567853",
	      "dkpp": "11.67.46-57.46"
	    },
	    {
	      "gtin": "875678567567"
	    },
	    {
	      "gtin": "5678567453",
	      "article_supplier": "5467456",
	      "dkpp": "45.67.46-57.46"
	    },
	    {
	      "gtin": "56785674353",
	      "article_supplier": "567856711",
	      "uktved": "3456",
	      "dkpp": "78.67.46-57.41"
	    },
	    {
	      "gtin": "5678354634",
	      "article_supplier": "57856",
	      "article_buyer": "3456435",
	      "uktved": "47564",
	      "dkpp": "98.67.46-57.46"
	    }
	  ]
	}

--------------

Приклад тіла **відповіді** в json форматі: 

.. code:: ruby

	{
	  "varMessage": "Success!",
	  "intCode": 200
	}

.. include:: SetAccess_errors.rst
