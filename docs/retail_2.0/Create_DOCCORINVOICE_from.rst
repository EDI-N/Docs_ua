########################################################################################################################
Створення "Коригування товарної накладної" (DOCCORINVOICE) на базі інших електронних документів
########################################################################################################################

.. картинки в текст

.. |лупа| image:: /_constant/icons/magnifying_glass.png

.. |будинок| image:: /_constant/icons/house.png

.. role:: red

.. role:: orange

.. contents:: Зміст:
   :depth: 2

---------

Вступ
====================================

Дана інструкція описує порядок формування та відправки документа "Коригування товарної накладної" (DOCCORINVOICE). У випадку коли Постачальник чи Мережа знайшли помилки в підписаній "Товарній накладній" (DOCUMENTINVOICE.DocumentFunctionCode = TN), Постачальнику потрібно формувати "Коригування товарної накладної" (DOCCORINVOICE) - цей документ може бути створений на підставі надісланої "Товарної накладної" (DOCUMENTINVOICE.DocumentFunctionCode = TN).

1 Створення "Коригування товарної накладної" (DOCCORINVOICE) на підставі надісланої "Товарної накладної" (DOCUMENTINVOICE.DocumentFunctionCode = TN)
========================================================================================================================================================

.. початок блоку для DOCCORINVOICE_from_DOCUMENTINVOICE_TN_001

Щоб сформувати "Коригування товарної накладної" (DOCCORINVOICE) Вам потрібно в меню сервісу **"EDI Network"** в папці **"Надіслані"** обрати "Товарну накладну" (DOCUMENTINVOICE.DocumentFunctionCode = TN), на підставі якої потрібно створити новий документ-коригування (для зручності можливо скористатись `пошуком <https://wiki.edin.ua/uk/latest/general_2_0/rabota_s_platformoj_EDIN_2.0.html#doc-search>`__):

.. image:: /retail_2.0/pics_Create_DOCCORINVOICE_from/Create_DOCCORINVOICE_from_001.png
   :align: center

Потрібно відкрити надіслану "Товарну накладну" (DOCUMENTINVOICE.DocumentFunctionCode = TN) лівою кнопкою миші та створити "Коригування товарної накладної" (DOCCORINVOICE) в блоці `ланцюжка документів <https://wiki.edin.ua/uk/latest/_constant/chain/chain.html>`__ для мережі за допомогою кнопки **"Створити документ"**:

.. image:: /retail_2.0/pics_Create_DOCCORINVOICE_from/Create_DOCCORINVOICE_from_002.png
   :align: center

У відкритій формі "Коригування товарної накладної" (DOCCORINVOICE) значна частина полів заповнюються автоматично з пов'язаної "Товарної накладної" (DOCUMENTINVOICE.DocumentFunctionCode = TN) (обов'язкові до заповнення поля позначені червоною зірочкою :red:`*`):

.. image:: /retail_2.0/pics_Create_DOCCORINVOICE_from/Create_DOCCORINVOICE_from_003.png
   :align: center

Дані **Відправника** - це Ваші дані, що заповнюються автоматично і не підлягають редагуванню. Змінити дані **Одержувача** можливо за допомогою кнопки **"Пошук контрагента"** (|лупа|).

Потрібно заповнити поле **Номер** та обрати **Дату** зі зручного picker-вікна. **Точка доставки** - ідентифікатор місця доставки (GLN, адреса), хоч і заповнюється автоматично, **однак потребує перевірки/редагування (кнопки "Пошук контрагента"** (|лупа|) / **"Вказати себе"** (|будинок|)): :red:`має бути зазначений GLN, де/звідки здійснюється прийомка/повернення` (може відрізнятись від того, що автоматично переноситься з "Товарної накладної" (DOCUMENTINVOICE));

.. hint::
   За допомогою кнопки **"Пошук контрагента"** (|лупа|) можливо вказати чи змінити дані контрагента, використовуючи в пошуку назву компанії, GLN або ІПН:

   .. image:: /retail_2.0/pics_RECADV_na_EDI_Network_2.0/RECADV_na_EDI_Network_11.png
      :align: center

Поля **"GLN для виставлення рахунку"** та **"Платник"** також заповнюються і редагуються за допомогою кнопок **"Пошук контрагента"** (|лупа|) чи **"Вказати себе"** (|будинок|).

**"Номер контракту"** підтягується автоматично з документа-підстави, а значення для поля **"Причина коригування"** потрібно обирати з випадаючого списку:

   * **Коригування прийомки на «-»** / **Коригування повернення на «-»** - в блоці товарних позицій в поле "Коригування кількості" чи "Коригування ціни" потрібно вказувати значення зі знаком "-". Поля "Кількість товару за накладною" і "Ціна без ПДВ" повинні залишатися незмінними.
   * **Коригування прийомки на «+»** / **Коригування повернення на «+»** - в блоці товарних позицій в поле "Коригування кількості" чи "Коригування ціни" потрібно вказувати значення без знаків. Поля "Кількість товару за накладною" і "Ціна без ПДВ" повинні залишатися незмінними.

Обов'язково заповнюються поля **"Номер податкової накладної"** / **"Дата податкової накладної"**, а також **"Номер Розрахунку коригування до ПН"** / **"Дата Розрахунку коригування до ПН"** пов’язаного "Коригування до податкової накладної" (DECLARj12).

Поля **"Номер повідомлення про відвантаження"**, **"Номер повідомлення про прийом"** ( :red:`Для Мережі "МЕТРО" замість номера повідомлення про прийом указується номер повернення з metrolink!`), **"Номер товарної накладної"**, **"Дата товарної накладної"** теж є обов'язковими до заповнення (заповнюються з документа-підстави).

В полі **Коригуючі дані** потрібно обрати значення до коригування ("Коригування ціни" / "Коригування кількості").

.. important::
   **Увага!** Номер вказаної накладної повинен повністю збігатися з номером оригіналу паперової накладної.

Блоки **Додаткова інформація** необов'язковий для заповнення та "згорнутий" за замовчуванням. Блок **Разом** розраховується автоматично після заповнення позицій.

.. image:: /retail_2.0/pics_Create_DOCCORINVOICE_from/Create_DOCCORINVOICE_from_004.png
   :align: center

В табличній частині створеного документа знаходиться перелік товарних позицій з документа-підстави. В залежності від обраного значення поля "Коригуючі дані", до швидкого редагування доступне поле "Коригування кількості" або "Коригування ціни": 

.. image:: /retail_2.0/pics_Create_DOCCORINVOICE_from/Create_DOCCORINVOICE_from_005.png
   :align: center

.. warning::
   Всі зміни за позиціями повинні виконуватись лише після узгодження з мережею!

**"Змінити"** дані товарної позиції можливо через pop-up вікно, що відкривається по кліку на штрихкод товару:

.. image:: /retail_2.0/pics_Create_DOCCORINVOICE_from/Create_DOCCORINVOICE_from_006.png
   :align: center

Для того, щоб поле **Код УКТ ЗЕД** при додаванні товарної позиції заповнювалось автоматично, необхідно, щоб дані були заповнені в `Товарному довіднику <https://wiki.edin.ua/uk/latest/retail_2.0/formirovanie_Tovarnogo_dovidnyka.html>`__.

Якщо по якійсь з позицій не було/буде поставки її необхідно відзначити галочкою і **"Видалити"**:

.. image:: /retail_2.0/pics_Create_DOCCORINVOICE_from/Create_DOCCORINVOICE_from_008.png
   :align: center

Можливо також **"+Додати"** іншу позицію з вашого `"Товарного довідника" <https://wiki.edin.ua/uk/latest/retail_2.0/formirovanie_Tovarnogo_dovidnyka.html>`__, заповнивши форму (обов'язкові до заповнення поля позначені червоною зірочкою :red:`*`):

.. image:: /retail_2.0/pics_Create_DOCCORINVOICE_from/Create_DOCCORINVOICE_from_009.png
   :align: center

Після внесення всіх необхідних змін в документ потрібно натиснути кнопку **"Зберегти"** (1), після чого документ можливо **"Підписати"** (2):

.. image:: /retail_2.0/pics_Create_DOCCORINVOICE_from/Create_DOCCORINVOICE_from_007.png
   :align: center

.. кінець блоку для DOCCORINVOICE_from_DOCUMENTINVOICE_TN_001

.. _sign:

1.1 Підписання та відправка "Коригування товарної накладної"
--------------------------------------------------------------------------------------------------

.. початок блоку для DOCCORINVOICE_from_DOCUMENTINVOICE_TN_002

.. tabs::

   .. tab:: Файловий ключ

      .. include:: /_constant/signing/signing.rst
         :start-after: .. початок блоку для Signing
         :end-before: .. кінець блоку для Signing

   .. tab:: Token

      .. include:: /_constant/token_signing/token_signing.rst
         :start-after: .. початок блоку для TokenSign
         :end-before: .. кінець блоку для TokenSign

   .. tab:: Гряда

      .. include:: /_constant/gryada_signing/gryada_signing.rst
         :start-after: .. початок блоку для GryadaSign
         :end-before: .. кінець блоку для GryadaSign

   .. tab:: Cloud

      .. include:: /_constant/cloud_signing/cloud_signing.rst
         :start-after: .. початок блоку для CloudSign
         :end-before: .. кінець блоку для CloudSign

Після підписання "Коригування товарної накладної" (DOCCORINVOICE) документ потрібно **"Відправити"**:

.. image:: /retail_2.0/pics_Create_DOCCORINVOICE_from/Create_DOCCORINVOICE_from_010.png
   :align: center

При відправці документа відредаговані дані товарних позицій автоматично оновлюються в `"Товарному довіднику" <https://wiki.edin.ua/uk/latest/retail_2.0/formirovanie_Tovarnogo_dovidnyka.html>`__. Відправлений документ автоматично потрапляє в папку **"Надіслані"** і буде знаходиться в `ланцюжку документів <https://wiki.edin.ua/uk/latest/_constant/chain/chain.html>`__ разом із пов'язании документами в статусі :orange:`"Очікує на підписання отримувачем"`:

.. image:: /retail_2.0/pics_Create_DOCCORINVOICE_from/Create_DOCCORINVOICE_from_011.png
   :align: center

.. кінець блоку для DOCCORINVOICE_from_DOCUMENTINVOICE_TN_002

-------------------------------------

.. include:: /_constant/kontakti.rst
