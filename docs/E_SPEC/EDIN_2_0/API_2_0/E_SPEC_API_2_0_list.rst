API
###########

**Шановні користувачі!**

Ми активно працюємо над оновленням бази знань EDIN-WiKi, тому ця сторінка втратила актуальність.

Актуальну версію документації ви знайдете за новим `посиланням <https://wiki-v2.edin.ua/books/robota-z-api/chapter/api-servisu-e-specifikaciiakomerciina-propoziciia>`__

Свої побажання, зауваження ви можете залишати в коментарях до статті на новій EDIN-WiKi.

Дякуємо за розуміння та користування сервісом!

.. сторінка перенесена на нову вікі

   .. image:: Work_with_API/pics/Basic_espec_002.png
      :align: center
      :height: 700px
      :alt: Стандартна схема E-Spec

   Алгоритми обміну документами в сервісі **Е-СПЕЦИФІКАЦІЯ** (API)
   ==============================================================================

   .. toctree::
      :maxdepth: 1
   
      Work_with_API/PRODUCTLIST_API_work
      Work_with_API/AGREEM_API_work
      Work_with_API/COMDOC_008_API_work

   * Після погодження (обоюдного підписання) "Товарної специфікації" (COMDOC_008) реалізована автоматична відправка документа «Електронна специфікація» (PRODUCTLIST) з урахуванням усіх погоджених змін. Мережа при цьому отримує документ через FTP сервіс EDIN. `Перегляд усіх Cпецифікацій <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetContracts.html>`__ / `Переглянути Специфікацію з конкретним контрагентом <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetContract.html>`__.

   -------------------------------

   .. hint::
       Всі запити нижче перерахованих API методів сервісу направляються на адресу: https://edo-v2.edin.ua 

   Авторизація
   ==============

   +-----------+-----------------------------+-----------------------------------------------------------------------------------------------------+
   | **Метод** |       **URL запиту**        |                                              **Опис**                                               |
   +===========+=============================+=====================================================================================================+
   | POST      | ``/api/authorization/hash`` | `Авторизація <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/Authorization.html>`__ |
   +-----------+-----------------------------+-----------------------------------------------------------------------------------------------------+

   .. beauty list

   .. toctree::
      :hidden:
      :glob:

      Methods/Authorization

   Налаштування рівнів погодження (тільки для Мережі)
   =========================================================

   +-----------+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | **Метод** |           **URL запиту**            |                                                                                                  **Опис**                                                                                                   |
   +===========+=====================================+=============================================================================================================================================================================================================+
   | GET       | ``/api/oas/account/users``          | `Отримання інформації про всіх користувачів компанії (на рівні акаунта) <https://wiki.edin.ua/uk/latest/integration_2_0/APIv2/Methods/GetCompanyUsers.html>`__                                              |
   +-----------+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | GET       | ``/api/es/user/spec_all_glns``      | `Отримати всі пов'язані GLN користувача в сервісі "Е-Специфікація" <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetSpecAllGlns.html>`__                                                  |
   +-----------+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | GET       | ``/api/es/user/spec_view_statuses`` | `Отримати всі статуси документів, в яких документи доступні користувачу до перегляду <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetSpecViewStatusesController.html>`__                 |
   +-----------+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | GET       | ``/api/es/user/spec_view_glns``     | `Отримати всі активні GLN користувача (за якими відображаються категорії товарів) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetSpecViewGlnsController.html>`__                        |
   +-----------+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | GET       | ``/api/es/user/spec_status``        | `Отримати налаштування дій узгодження для вказаного користувача в розрізі кожного підтипу документа AGREEM <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetSpecStatusController.html>`__ |
   +-----------+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | POST      | ``/api/es/user/spec_view_statuses`` | `Вказати нові статуси документів, в яких документи будуть доступні користувачу до перегляду <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/PostSpecViewStatusesController.html>`__         |
   +-----------+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | POST      | ``/api/es/user/spec_view_glns``     | `Вказати нові активні GLN користувача (за якими відображаються категорії товарів) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/PostSpecViewGlnsController.html>`__                       |
   +-----------+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | POST      | ``/api/es/user/spec_status``        | `Вказати нові дії узгодження для вказаного користувача в розрізі кожного підтипу документа AGREEM <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/PostSpecStatusController.html>`__         |
   +-----------+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. beauty list

   .. toctree::
      :hidden:
      :glob:

      /integration_2_0/APIv2/Methods/GetCompanyUsers
      Methods/GetSpecAllGlns
      Methods/GetSpecViewStatusesController
      Methods/GetSpecViewGlnsController
      Methods/GetSpecStatusController
      Methods/PostSpecViewStatusesController
      Methods/PostSpecViewGlnsController
      Methods/PostSpecStatusController

   .. _contracts:

   Робота з контрактами / специфікаціями
   ================================================

   +-----------+------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | **Метод** |        **URL запиту**        |                                                                     **Опис**                                                                     |
   +===========+==============================+==================================================================================================================================================+
   | POST      | ``/api/es/contract``         | `Створення нової специфікації (Мережа) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/PostContractController.html>`__           |
   +-----------+------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | PUT       | ``/api/es/contract``         | `Оновлення раніше створеної специфікації (Мережа) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/PutContractController.html>`__ |
   +-----------+------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | GET       | ``/api/es/contracts``        | `Перегляд усіх контрактів/специфікацій <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetContracts.html>`__                     |
   +-----------+------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | GET       | ``/api/es/contract``         | `Переглянути контракт з конкретним контрагентом <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetContract.html>`__             |
   +-----------+------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | DELETE    | ``/api/es/contract/data``    | `Видалити контракт/товарні позиції в контракті <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/RemoveContractData.html>`__       |
   +-----------+------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | POST      | ``/api/es/contracts/search`` | `Пошук контрактів/специфікацій (з фільтрацією) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/SearchContracts.html>`__          |
   +-----------+------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+

   .. beauty list

   .. toctree::
      :hidden:
      :glob:

      Methods/PostContractController
      Methods/PutContractController
      Methods/GetContracts
      Methods/GetContract
      Methods/RemoveContractData
      Methods/SearchContracts

   .. _agreement:

   Робота з пропозиціями
   ============================

   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | **Метод** |           **URL запиту**           |                                                                                                  **Опис**                                                                                                   |
   +===========+====================================+=============================================================================================================================================================================================================+
   | GET       | ``/api/es/agreements``             | `Отримати список документів в журналі <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetAgreements.html>`__                                                                                |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | GET       | ``/api/oas/retailer/settings``     | `Переглянути налаштування мережі <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetRetailerEsSettings.html>`__                                                                             |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | GET       | ``/api/es/agreement``              | `Отримати дані товарного узгодження <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetAgreement.html>`__                                                                                   |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | POST      | ``/api/es/agreement``              | `Створити пропозицію (переузгодження) (для Постачальника) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/CreateAgreement.html>`__                                                          |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | PUT       | ``/api/es/agreement``              | `Редагувати пропозицію (переузгодження) (для Постачальника) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/UpdateAgreement.html>`__                                                        |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | POST      | ``/api/es/agreement/body``         | `Створити тіло документа (комерційної пропозиції / товарного узгодження) / Додати обгрунтування до пропозиції <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/CreateAgreementBody2.html>`__ |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | GET       | ``/api/es/agreement/body``         | `Отримати тіло документа (комерційної пропозиції / товарного узгодження) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetAgreementBody.html>`__                                          |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | PUT       | ``/api/es/agreement/body``         | `Оновити тіло документа (комерційної пропозиції / товарного узгодження) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/UpdateAgreementBody.html>`__                                        |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | DELETE    | ``/api/es/agreement``              | `Видалити пропозицію <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/DeleteAgreement.html>`__                                                                                               |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | DELETE    | ``/api/es/agreement/attachment``   | `Видалити вкладення (обгрунтування) пропозиції товарного переузгодження <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/DeleteAgreementAttachment.html>`__                                  |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | GET       | ``/api/es/attachment``             | `Отримати список вкладень до пропозиції товарного переузгодження чи конкретного коментаря документа <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetAgreementAttachment.html>`__         |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | GET       | ``/api/es/attachment/body``        | `Отримати контент файлу-вкладення товарного узгодження чи коментаря <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetAgreementAttachmentBody.html>`__                                     |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | POST      | ``/api/es/attachment``             | `Додати обгрунтування до пропозиції товарного переузгодження (Постачальник) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/PostAgreementAttachment.html>`__                                |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | PATCH     | ``/api/es/agreement``              | `Надіслати пропозицію (переузгодження) (для Постачальника) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/SendAgreement.html>`__                                                           |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | PATCH     | ``/api/es/agreement/comdoc``       | `Надіслати підписану пропозицію <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/SendAgreementComdoc.html>`__                                                                                |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | GET       | ``/api/es/agreement/signers``      | `Отримання інформації про сертифікати підписантів <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetAgreementSigners.html>`__                                                              |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | PUT       | ``/api/es/agreement/copy``         | `Клонування товарного узгодження (створення пропозиції) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/CopyAgreement.html>`__                                                              |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | POST      | ``/api/es/agreements/search``      | `Пошук "Товарних узгоджень" (AGREEM) з фільтрацією <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/SearchAgreements.html>`__                                                                |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | GET       | ``/api/es/agreement/excel``        | `Формування та отримання Excel-звіту по акціях <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetAgreementExcel.html>`__                                                                   |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | PATCH     | ``/api/v2/es/agreement/positions`` | `Приймання/Відхилення позицій «Товарного узгодження» (Мережа) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/AgreementPositionAction.html>`__                                              |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | PATCH     | ``/api/v2/es/agreement/reject``    | `Відхилення «Товарного узгодження» (Мережа) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/AgreementReject.html>`__                                                                        |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | POST      | ``/api/v2/es/agreement/comdoc``    | `Прийняти «Товарне узгодження» (Мережа) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/PostAgreementComdoc.html>`__                                                                        |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | PATCH     | ``/api/v2/es/agreement/comdoc``    | `Відправити підписаний документ «Товарна специфікація» (Мережа) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/PatchAgreementComdoc.html>`__                                               |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | GET       | ``/api/v2/es/agreement/comdoc``    | `Отримати XML контента документа «Товарна специфікація» (Мережа) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetAgreementComdoc.html>`__                                                |
   +-----------+------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. beauty list

   .. toctree::
      :hidden:
      :glob:

      Methods/GetAgreements
      Methods/GetRetailerEsSettings
      Methods/GetAgreement
      Methods/CreateAgreement
      Methods/UpdateAgreement
      Methods/CreateAgreementBody2
      Methods/GetAgreementBody
      Methods/UpdateAgreementBody
      Methods/DeleteAgreement
      Methods/DeleteAgreementAttachment
      Methods/GetAgreementAttachment
      Methods/GetAgreementAttachmentBody
      Methods/PostAgreementAttachment
      Methods/SendAgreement
      Methods/SendAgreementComdoc
      Methods/GetAgreementSigners
      Methods/CopyAgreement
      Methods/SearchAgreements
      Methods/GetAgreementExcel
      Methods/AgreementPositionAction
      Methods/AgreementReject
      Methods/PostAgreementComdoc
      Methods/PatchAgreementComdoc
      Methods/GetAgreementComdoc

   Робота з коментарями
   ============================

   +-----------+--------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | **Метод** |         **URL запиту**         |                                                                         **Опис**                                                                          |
   +===========+================================+===========================================================================================================================================================+
   | POST      | ``/api/es/agreement/comment``  | `Створити коментар до пропозиції товарного переузгодження <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/CreateAgreementComment.html>`__ |
   +-----------+--------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | GET       | ``/api/es/agreement/comments`` | `Переглянути коментарі <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/GetAgreementComments.html>`__                                      |
   +-----------+--------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. beauty list

   .. toctree::
      :hidden:
      :glob:

      Methods/CreateAgreementComment
      Methods/GetAgreementComments

   Робота зі статусами
   ============================

   +-----------+----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | **Метод** |          **URL запиту**          |                                                                                 **Опис**                                                                                 |
   +===========+==================================+==========================================================================================================================================================================+
   | PUT       | ``/api/es/agreement/status``     | `Оновити статус документа (комерційної пропозиції / товарного узгодження) <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/UpdateAgreementStatus.html>`__ |
   +-----------+----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | PUT       | ``/api/es/agreement/sub_status`` | `Оновити внутрішній статус пропозиції <https://wiki.edin.ua/uk/latest/E_SPEC/EDIN_2_0/API_2_0/Methods/UpdateAgreementSubStatus.html>`__                                  |
   +-----------+----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. beauty list

   .. toctree::
      :hidden:
      :glob:

      Methods/UpdateAgreementStatus
      Methods/UpdateAgreementSubStatus

   ---------------------------------

   .. _main-errors:

   Загальні помилки при роботі з API (всі сервіси EDIN)
   =========================================================================================

   .. csv-table:: 
     :file: /_constant/common_api_errors.csv
     :widths:  10, 20, 20, 40
     :stub-columns: 0

   .. csv-table:: 
     :file: /_constant/main_api_errors.csv
     :widths:  10, 20, 60
     :stub-columns: 0

   .. old auto list (deprecated)

       .. toctree::
       :hidden:
       :glob:

       Methods/*



