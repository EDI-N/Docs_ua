########################################################################################################
Опис файлу користувацьких налаштувань UserSettings.txt модуля для інтеграції з платформою EDI-NETWORK 
########################################################################################################

.. contents:: Зміст:
   :depth: 6

---------

Файл **UserSettings.txt** створюється при використанні обробки 1С | BAS інтеграції API платформи EDI-NETWORK. Файл **UserSettings.txt** – текстовий файл, в якому зберігаються налаштування користувача обробки 1С | BAS інтеграції платформи EDI-NETWORK (надалі **ОІ_EDIN20**). Збережені у файлі налаштування є персональними кожного з користувачів ОІ_EDIN20 і повноту їх заповнення визначає сам користувач.
При першому запуску **ОІ_EDIN20** в «1С | BAS Підприємстві» в каталозі, в якому розміщена **ОІ_EDIN20**,  проходить пошук каталогу, назва якого співпадає з назвою поточного користувача 1С | BAS. Якщо такий каталог відсутній - він створюється. В каталозі користувача перевіряється наявність файлу **UserSettings.txt**. Якщо файл не знайдено - він створюється. Перед початком роботи необхідно впевнитись, що у користувача операційної системи є права на читання та запис у каталозі, в якому розташована **ОІ_EDIN20**.
Дані у файлі зберігаються у вигляді JSON рядка, в якому дані розділені по певним інформативним блокам. Вміст, структура, послідовність даних файлу безпосередньо залежить від налаштувань, які внесені **ОІ_EDIN20**.

****************************************
**Дані користувача**
****************************************

Перелік персональних даних користувача зберігається у блоці **USER_DATA**. Дані користувач заповнює на закладці **«Налаштування»**.

.. image:: pics_UserSettings_description/UserSettings_description_01.png
   :align: center

.. image:: pics_UserSettings_description/UserSettings_description_02.png
   :align: center

+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+
| **USER_DATA** |                                                                        |                                                                                                                                                                                                                                                                      |     |
+===============+========================================================================+======================================================================================================================================================================================================================================================================+=====+
|               | EDIN_USER_Warehouse                                                    | Містить JSON рядок опису пошуку складу 1С | BAS, який буде по замовчуванню заповнюватися в документ 1С | BAS. Опис рядка нижче. Вказується у полі «Склад».                                                                                                                       |     |
+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+
|               | EDIN_USER_Organization_Unit                                            | Містить JSON рядок опису пошуку підрозілу 1С | BAS, який буде по замовчуванню заповнюватися в документ 1С | BAS. Опис рядка нижче. Вказується у полі «Підрозділ».                                                                                                                |     |
+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+
|               | EDIN_USER_Save_Loggs                                                   | Вказує необхідність збереження логів при формуванні записів на відправлення документів. Вказується прапорцем «Зберігати логи».                                                                                                                                       |     |
+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+
|               | EDIN_USER_Log_Folder_Sent                                              | Каталог збереження логів успішно відправлених запитів. Вказується у полі «Каталог логів відправлених запитів».                                                                                                                                                       |     |
+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+
|               | EDIN_USER_Log_Folder_Error                                             | Каталог збереження логів запитів з помилками. Вказується у полі «Каталог логів помилкових запитів».                                                                                                                                                                  |     |
+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+
|               | EDIN_USER_Test_Mode                                                    | Вказує на необхідність створення чорновиків(не документів) і перегляду уже створених. Вказується прапорцем «Тестовий режим». Якщо прапорець не встановлено, тоді у таблиці закладки «Відправлені» чорновики не відображаються, а при відправці формуються документи. |     |
+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+
|               | EDIN_USER_Save_UZD_DOCUMENTS                                           | Вказує на необхідності збереження отриманих і відправлених юридично значимих документів локально. Вказується прапорцем «Зберігати ЮЗД».                                                                                                                              |     |
+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+
|               | EDIN_USER_Inbox_UZD_Folder                                             | Каталог збереження вхідних ЮЗД. Вказується у полі «Каталог вхідних ЮЗД».                                                                                                                                                                                             |     |
+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+
|               | EDIN_USER_Outbox_UZD_Folder                                            | Каталог збереження відправлених ЮЗД. Вказується у полі «Каталог відправлених ЮЗД».                                                                                                                                                                                   |     |
+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+
|               | USER_1                                                                 | Назва користувача із табличної частини підключення в колонці «Логін», в рядку якого встановлено прапорець «Вибрати». Відображає                                                                                                                                      |     |
+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+
|               | ...                                                                    |                                                                                                                                                                                                                                                                      |     |
+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+
|               | USER_[кількість користувачів API, з якими працює користувач ОІ_EDIN20] |                                                                                                                                                                                                                                                                      |     |
+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+
|               | USER_RETAILERS                                                         | Блок списку мереж, з якими працює користувач. Список обирається у формі мереж після натискання кнопки «Мережі»                                                                                                                                                       |     |
+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+
|               | Retailer1                                                              | ІД вибраної мережі                                                                                                                                                                                                                                                   |     |
+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+
|               | ...                                                                    |                                                                                                                                                                                                                                                                      |     |
+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+
|               | Retailer[порядковий номер вибраної мережі]                             | ІД вибраної мережі                                                                                                                                                                                                                                                   |     |
+---------------+------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----+

****************************************
**Електронно цифрові підписи**
****************************************

.. image:: pics_UserSettings_description/UserSettings_description_03.png
   :align: center

Список ключів, які користувач використовує або буде використовувати вказується на закладці **ЕЦП**. На момент підписання у табличній частині по одній організації може бути встановлено прапорець тільки по одному з рядків. Це необхідно, щоб при підписанні однозначно визначити необхідну пару ключів. Внесені ключі зберігаються в блоці **SIGN_KEYS**.

+---------------+---------------------+-----------------+-------------------------------------------------------------------------------------------------------------+
| **SIGN_KEYS** |                     |                 |                                                    Опис                                                     |
+===============+=====================+=================+=============================================================================================================+
|               | Keys_1              |                 | Блок опису пари підписів організації                                                                        |
+---------------+---------------------+-----------------+-------------------------------------------------------------------------------------------------------------+
|               |                     | Use             | Відмітка використання пари даної парі ключів. Вказується у колонці «Вибрати»                                |
+---------------+---------------------+-----------------+-------------------------------------------------------------------------------------------------------------+
|               |                     | Organization    | Унікальний ідентифікатор довідника організації. Визначається по значенню вказанному у колонці «Організація» |
+---------------+---------------------+-----------------+-------------------------------------------------------------------------------------------------------------+
|               |                     | KeyAccountant   | Повний шлях до ключа бухгалтера. Вказується у колонці «Ключ бухгалтера»                                     |
+---------------+---------------------+-----------------+-------------------------------------------------------------------------------------------------------------+
|               |                     | KeyDigitalStamp | Повний шлях до ключа печатки. Вказується у колонці «Ключ печатки»                                           |
+---------------+---------------------+-----------------+-------------------------------------------------------------------------------------------------------------+
|               | ...                 |                 |                                                                                                             |
+---------------+---------------------+-----------------+-------------------------------------------------------------------------------------------------------------+
|               | Keys_[к-сть рядків] |                 |                                                                                                             |
+---------------+---------------------+-----------------+-------------------------------------------------------------------------------------------------------------+

***************************************************
**Зразок файлу користувацьких налаштувань**
***************************************************

::

        {
            "USER_DATA": {
                "EDIN_USER_Warehouse": "{\r\n\"MetaDataObject\": \"Справочники\",\r\n\"Name\": \"Склады\",\r\n\"ID\": \"59c9e0fe-56a3-11e9-941e-70c94ef89d69\"\r\n}",
                "EDIN_USER_Organization_Unit": "{\r\n\"MetaDataObject\": \"Справочники\",\r\n\"Name\": \"ПодразделенияОрганизаций\",\r\n\"ID\": \"59c9e0fb-56a3-11e9-941e-70c94ef89d69\"\r\n}",
                "EDIN_USER_Save_Loggs": "1",
                "EDIN_USER_Log_Folder_Sent": "C:\\API\\Админ\\Каталог логів відпралених запитів\\",
                "EDIN_USER_Log_Folder_Error": "C:\\API\\Админ\\Каталог логів помилкових запитів\\",
                "EDIN_USER_Test_Mode": "1",
                "EDIN_USER_Save_UZD_DOCUMENTS": "1",
                "EDIN_USER_Inbox_UZD_Folder": "C:\\API\\Админ\\Каталог вхідних ЮЗД\\",
                "EDIN_USER_Outbox_UZD_Folder": "C:\\API\\Админ\\Каталог відправлених ЮЗД\\",
                "USER_1": "uatestAPIpost",
                "USER_RETAILERS": {
                    "retailer1": "16404",
                    "retailer2": "17046"
                }
            },
            "SIGN_KEYS": {
                "Keys_1": {
                    "Use": 1,
                    "Organization": "59c9e0fa-56a3-11e9-941e-70c94ef89d69",
                    "KeyAccountant": "D:\\1C_Yurchenko\\Keys\\new\\Директор\\Key-6.dat",
                    "KeyDigitalStamp": "D:\\1C_Yurchenko\\Keys\\new\\Печатка\\Key-6.dat"
                }
            }
        }


