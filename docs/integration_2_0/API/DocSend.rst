######################################################################
**Відправка чернетки**
######################################################################

Для роботи з цим методом користувач повинен бути `авторизованим <https://wiki.edi-n.com/ru/latest/integration_2_0/API/Authorization.html>`__ .

За допомогою методу **/api/eds/doc/send** можлива відправка чернетки в певний ланцюжок.

+--------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+
|                       **Метод запиту**                       |                                                       **HTTP PATCH**                                                        |
+==============================================================+=============================================================================================================================+
| **Content-Type**                                             | application/json (тіло HTTP запиту / відповіді в json форматі)                                                              |
+--------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+
| **URL запиту**                                               | https://edo-v2.edi-n.com/api/eds/doc/send                                                                                   |
+--------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+
| **Параметри, що передаються в URL (разом з адресою методу)** | У рядку заголовка (Header) "Cookie" обов'язково передається **SID** - токен отриманий при авторизації                       |
|                                                              |                                                                                                                             |
|                                                              | **Обов'язкові url-параметри:**                                                                                              |
|                                                              |                                                                                                                             |
|                                                              | **gln** - рядок (13); номер GLN організації, яка пов'язана з авторизованим користувачем платформи EDIN 2.0 на рівні акаунта |
|                                                              |                                                                                                                             |
|                                                              | **doc_uuid** - рядок; UUID документа                                                                                        |
|                                                              |                                                                                                                             |
|                                                              | **doc_hash** - рядок; хеш документа                                                                                         |
|                                                              |                                                                                                                             |
|                                                              | **chain_hash** - рядок; хеш ланцюжка (можливо взяти з відповіді методу **api/eds/chains/search** )                          |
|                                                              |                                                                                                                             |
|                                                              | **chain_uuid** - рядок; ID ланцюжка                                                                                         |
+--------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+


.. note:: Наявність ритейлера при документообігу автоматично визначається платформою (тобто якщо Відправник або Одержувач є ритейлером, то створений ланцюжок буде мати позначку конкретного ритейлера)

**Увага:** У запиті в тілі json присутні обов'язкові (повинні передаватися) і опціональні параметри (колонка Тип_).

.. hint:: Також можливо виконати запит у вигляді curl-рядка:
          
          curl -X PATCH 'https://edo-v2.edi-n.com/api/eds/doc/send?gln=9864065702429&doc_uuid=8c8a70e7-81c6-4382-8b58-7d60c3bc6ffd&doc_hash=704DD5F0A71FCB730D2B1AEA84FEE3FB&chain_hash=704DD5F0A71FCB730D2B1AEA84FEE3FB&chain_uuid=8c8a70e7-81c6-4382-8b58-7d60c3bc6ffd&partner_id=11' -b 'SID=458a0d38-5b56-4b8e-8998-009a1edd31eb'

Специфікація для розшифровки ключів curl запиту: https://curl.haxx.se/docs/manpage.html

--------------

**JSON-параметри в тілі HTTP запиту/відповіді**

--------------

**REQUEST**

--------------

Таблиця 1 - Опис json-параметрів (фільтр) **запиту** методу API

+------------------------+------+-------------------------------+---------------------------------------------------------------------------------------+
|      Найменування      | Тип_ |            Формат             |                                         Опис                                          |
+========================+======+===============================+=======================================================================================+
| **extra_fields**       |      | **Map<String, String>**       | масив об'єктів; набір індексів                                                        |
+------------------------+------+-------------------------------+---------------------------------------------------------------------------------------+
| **multi_extra_fields** |      | **Map<String, List<String>>** | масив об'єктів; мультиіндекс. Може бути використаний для індексування елементів рядка |
+------------------------+------+-------------------------------+---------------------------------------------------------------------------------------+

Таблиця 2 - Опис **extra_fields** параметрів

.. csv-table:: 
  :file: for_csv/extra_fields.csv
  :widths:  1, 2, 7, 12, 41
  :header-rows: 1
  :stub-columns: 0


.. _Тип:

Тип поля: **M - mandatory** (обов'язкове до заповнення), **O - optional** (опціональне)

--------------

**RESPONSE**

--------------

У цьому методі json-тіло **запиту** відсутнє (інші дані передавати не потрібно).

--------------

**Приклади**

--------------

**Приклад тіла запиту (json):**

.. code:: ruby

  {
    "extra_fields": {
      "sender": "4820128010004",
      "doc_num": "ORG00000014",
      "buyer_uuid": "4820128010004",
      "delivery_date": "1551477600",
      "order_number": "6422722fb78c4509b06eac43758e1545",
      "supplier_uuid": "9864065702429",
      "contract_number": "334455",
      "delivery_place_uuid": "4820128019007",
      "order_date": "1550181600",
      "doc_date": "1555432208",
      "action": "29"
    }
  }

--------------

**Приклад тіла відповіді (json):**

У цьому методі json-тіло **відповіді** відсутнє.

Повертаємий текст – «OK»






