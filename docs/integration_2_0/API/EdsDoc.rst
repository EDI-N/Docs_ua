######################################################################
**Створення чернетки документа**
######################################################################

Для роботи з цим методом користувач повинен бути `авторизованим <https://wiki.edi-n.com/ru/latest/integration_2_0/API/Authorization.html>`__ .

За допомогою методу **api/eds/doc** можливо швидко створити чернетку документа конкретного зазначеного типу для конкретного одержувача.

+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
|                       **Метод запиту**                       |                                                                  **HTTP POST**                                                                   |
+==============================================================+==================================================================================================================================================+
| **Content-Type**                                             | application/json (тіло HTTP запиту / відповіді в json форматі)                                                                                   |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
| **URL запиту**                                               | https://edo-v2.edi-n.com/api/eds/doc?gln=9864065702429&doc_type=orders&doc_number=sdsd334&doc_date=1505497243&recipient=9864065702428&family=edi |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
| **Параметри, що передаються в URL (разом з адресою методу)** | У рядку заголовка (Header) "Cookie" обов'язково передається **SID** - токен отриманий при авторизації                                            |
|                                                              |                                                                                                                                                  |
|                                                              | **Обов'язкові url-параметри:**                                                                                                                   |
|                                                              |                                                                                                                                                  |
|                                                              | **gln** - рядок (13); номер GLN організації, яка пов'язана з авторизованим користувачем платформи EDIN 2.0 на рівні акаунта                      |
|                                                              |                                                                                                                                                  |
|                                                              | **doc_type** - рядок; конкретний тип документа                                                                                                   |
|                                                              |                                                                                                                                                  |
|                                                              | **doc_number** - рядок; номер документа                                                                                                          |
|                                                              |                                                                                                                                                  |
|                                                              | **doc_date** - число; дата документа (в форматі UNIX-timestamp)                                                                                  |
|                                                              |                                                                                                                                                  |
|                                                              | **recipient** - рядок(13); gln отримувача                                                                                                        |
|                                                              |                                                                                                                                                  |
|                                                              | **family** - рядок; "група" документів, можливі значення:                                                                                        |
|                                                              | - edi                                                                                                                                            |
|                                                              | - uzd                                                                                                                                            |
|                                                              | - reports                                                                                                                                        |
|                                                              | - certificats                                                                                                                                    |
|                                                              | - factoring                                                                                                                                      |
|                                                              |                                                                                                                                                  |
|                                                              | {"…"} - тіло http запиту - json документа                                                                                                        |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+

.. hint:: Також можливо виконати запит у вигляді curl-рядка:
          
          curl -X POST 'https://edo-v2.edi-n.com/api/eds/doc?gln=9864065702429&doc_type=orders&doc_number=sdsd334&doc_date=1505497243&recipient=9864065702428&family=edi' -d {json - тело документа} -b 'SID=458a0d38-5b56-4b8e-8998-009a1edd31eb'

Специфікація для розшифровки ключів curl запиту: https://curl.haxx.se/docs/manpage.html

--------------

**JSON-параметри в тілі HTTP запиту/відповіді**

--------------

**REQUEST**

--------------

У цьому методі в json-тілі **запиту** передаються поля документа (зі `специфікацією документів <https://wiki.edi-n.com/uk/latest/XML/XML-structure.html>`__ ви можете ознайомитися у відповідному розділі).

--------------

**RESPONSE**

--------------

В **відповідь** передається "ID створеної чернетки" (довжина 36 символів), наприклад, `fb285cdb-31f8-4d59-b89b-77e30e608e12`.

--------------

**Приклади**

--------------

**Приклад тіла запиту (json):**

.. code:: ruby

   {
	"NUMBER": "6422722fb78c4509b06eac43758e1545",
	"DATE": "2019-02-15",
	"TIME": "00:00",
	"ORDERNUMBER": "6422722fb78c4509b06eac43758e1545",
	"ORDERDATE": "2019-02-15",
	"DELIVERYDATE": "2019-02-30",
	"DELIVERYTIME": "10:00",
	"CAMPAIGNNUMBER": "334455",
	"CURRENCY": "UAH",
	"LIMES": [],
	"HEAD": [
		{
			"BUYER": "4820128010004",
			"SUPPLIER": "9864065702429",
			"DELIVERYPLACE": "4820128019007",
			"INVOICEPARTNER": "4820128010004",
			"SENDER": "4820128010004",
			"RECIPIENT": "9864065702429",
			"POSITION": [
				{
					"POSITIONNUMBER": "1",
					"PRODUCT": "5029053540900",
					"PRODUCTIDBUYER": "527209",
					"DESCRIPTION": "пироженко",
					"PRICE": 510,
					"PRICEWITHVAT": 571.2,
					"VAT": "12.00",
					"AMOUNT": 0,
					"AMOUNTWITHVAT": 0,
					"ORDEREDQUANTITY": 64,
					"ACCEPTEDQUANTITY": 64,
					"PRODUCTTYPE": "1"
				},
				{
					"POSITIONNUMBER": "2",
					"PRODUCT": "5029053540924",
					"PRODUCTIDBUYER": "527215",
					"DESCRIPTION": "мороженко",
					"PRICE": 510,
					"PRICEWITHVAT": 571.2,
					"VAT": "12.00",
					"AMOUNT": 0,
					"AMOUNTWITHVAT": 0,
					"ORDEREDQUANTITY": 32,
					"ACCEPTEDQUANTITY": 32,
					"PRODUCTTYPE": "1"
				},
				...
				{
					"POSITIONNUMBER": "48",
					"PRODUCT": "5029053543987",
					"PRODUCTIDBUYER": "100307632",
					"DESCRIPTION": "водочка",
					"PRICE": 1751.6,
					"PRICEWITHVAT": 1961.79,
					"VAT": "12.00",
					"AMOUNT": 0,
					"AMOUNTWITHVAT": 0,
					"ORDEREDQUANTITY": 12,
					"ACCEPTEDQUANTITY": 12,
					"PRODUCTTYPE": "1"
				}
			]
		}
	],
	"ACTION": "29"
	}

--------------

**Приклад тіла відповіді (json):**

Повертаємий текст - ID створеної чернетки (36 символів)

.. code:: ruby

    fb285cdb-31f8-4d59-b89b-77e30e608e12






